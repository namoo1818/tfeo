# 🏠 스물다섯 여든하나 (빅데이터 추천 기반 대학생 - 어르신 주거 연계 통합 서비스)

# 🏠 서비스 개요

### ✏ 서비스 설명

- '스물다섯 여든하나'는 대학생, 어르신들의 성향과 집 옵션을 기반으로 한 추천 알고리즘을 적용해 룸 쉐어링 신청부터 추천 그리고 계약서 작성까지 한번에 진행할 수 있도록 하는
대학생 - 어르신 주거 연계 통합 서비스입니다. 
- 컨텐츠 기반 필터링을 통한 맞춤 집 추천부터 계약서 생성 자동화를 통한 손 쉬운 계약 진행, 기존 활동 인증 체계를 개선한 서로의 니즈를 충족하는 기능을 제공함으로써
복잡했던 룸 쉐어링 사업의 시행을 간소화 하였습니다.

### ✏ 기획배경

한국보다 고령화 문제가 사회적 문제로 먼저 대두된 일본의 설문조사에서, 
독거 노인 중 78%가 외로움을 가장 큰 문제라고 뽑았습니다. 
설문조사 대상 일본 어르신들은 동일 세대와의 교류도 이 외로움을 달래기 위한 좋은 방법이지만, 손자 혹은 손녀 등 특히 다른 세대와 교류할 때 
조금 더 외로움 해소에 도움이 된다고 응답했습니다.

다음은 일본 학생 인터뷰 중 일부입니다.

"우리가 만난 어르신들은 젊은 세대들이 어르신들과 같은 눈높이에서 대화를 나누는 것만으로도 기뻐했습니다. 
기존의 요양보호사나 간병인들과는 또 다른 형태로 어르신들에게 다가갈 수 있는 서비스가 절실히 필요하다는 생각이 들었습니다."

현재 한국에서도 '디지털소외계층'이란 말을 통해 미루어볼 수 있듯이,
노년층이 빠른 디지털 전환 속도를 따라가지 못하고 젊은 세대와의 교류가 끊기는 경우가 다반사이며 
고령화로 인한 문제들이 수면 위로 드러나고 있습니다. 서울시는 '한지붕세대공감' 사업을 통해 약 10년간 학생들과 어르신들의 주거 연계 지원하고 있지만,
복잡한 사업 신청 절차와 학생들과 어르신들의 성향 매칭의 어려움으로 인해 큰 성공을 거두기 어려웠습니다. 

이에 우리 팀은 서울시가 진행하는 '한지붕세대공감' 정책 문제점을 개선한 이 서비스를 기획하게 되었습니다.

### ✏ 기존 서비스의 문제점

- 사업 신청 시, 집 정보 미공개로 인해 학생들이 선택할 수 있는 기회를 제공 받지 못하고 있습니다.
- 학생과 어르신의 성향을 반영한 매칭의 어려움으로 인해 학생과 어르신 간 갈등 상황이 빈번히 발생하고 있습니다.
- 코디네이터를 통한 복잡한 집 등록 절차로 인해 어르신들의 사업 참여율이 저조합니다.
- 계약 과정이 번거롭고 계약 이후의 지속적인 모니터링 환경이 부족합니다.
- 지자체마다 별도로 운영되고 있는 플랫폼으로 인해 관리가 효율적으로 이루어지지 않고 있습니다.

### ✏ 타겟

- 학기 중 대학 주변에 자취방을 구하기 어려운 대학생
- 보증금이 없는 저렴한 월세로 쾌적한 환경의 집에서 거주하고 싶은 대학생
- 텅빈 집에서 외로움을 느끼는 자가를 소유한 노년층
- 젊은 세대와 소통을 하고 싶은 노년층

### ✏ 기대 효과

- 성향을 반영한 매칭 및 추천을 통해 대학생과 노년층의 원만한 홈쉐어링
- 노년층의 우울감 해소 및 디지털정보격차 완화
- 청년 주거 비용 및 환경 문제 해결
- 지속적인 모니터링 환경 제공으로 홈쉐어링 시 발생할 수 있는 문제 상황 인지 및 조치
- 통합 플랫폼 구축으로 지자체별 사업 진행 혼선 방지

# 🏠 프로젝트 산출물

### ✏ 요구사항 정의서

- 아이디어 기획 및 구체화 단계에서 요구사항 정의
- 우선순위 지정 후 기능 확정

### ✏ Wireframe

- Figma 활용 UI/UX 디자인 진행
- 기능 develop

![Wireframe](https://github.com/namoo1818/Baekjoon/assets/50236187/7cb62436-eecb-46c4-9c7d-31f91acb8901)

### ✏ ER-Diagram

- ERD Cloud 활용

![ERD](https://github.com/namoo1818/Baekjoon/assets/50236187/4acf6827-3e3a-46e0-a3e5-f0840302f882)

### ✏ System Architecture

- Jenkins CI/CD pipeline
- Nginx
- Docker

![인프라구조도](https://github.com/NoRuTnT/Dotori/assets/114069644/b8a661e2-85d4-4ac6-a863-0699a7eee73b)

# 🏠 프로젝트 진행

### ✏ Notion

- 프로젝트 관련 학습 내용과 논의 내용을 notion 에 작성하여 문서 관리

### ✏ Jira

- 프로젝트 일정 관리
- 이슈 발행 및 담당자 지정
  - 매주 스프린트 시작 전 백로그에 이슈 등록
  - 소요 시간 별 스토리 포인트 지정
  - 하위 작업 등록을 통한 세부 일정 관리
- 스프린트 번다운 차트 활용

### ✏ Git

- 팀 Notion에 Git 행동 강령과 Commit convention 작성, 공유

![Git](https://github.com/namoo1818/Baekjoon/assets/50236187/fddaf9b8-b410-4e43-a999-d3fa9c97b5fd)


- 작업 브랜치 전략

```
master - develop - feature - backend - 기능
                           - frontend
                           - data
```

# 🏠 서비스 화면 및 기능 소개

### 👪 랜딩 및 로그인 페이지
![image](https://github.com/NoRuTnT/becareful/assets/114069644/694ab51f-ec75-4f75-b7b1-115662e7f8f4)
### 🧓 메인 홈 페이지
#### 🧓 지도
- 지도 상 위치 및 헤더 필터, 상세 필터 기반 집 추천

![집추천1](https://github.com/namoo1818/Baekjoon/assets/50236187/d3b654e1-7195-4de4-8adb-c859a97db264)
![집추천2](https://github.com/namoo1818/Baekjoon/assets/50236187/950437a5-8919-4549-8eea-ffa3909598ba)

#### 🧓 집 추천
- 집 리스트 지도와 연동

![집추천3](https://github.com/namoo1818/Baekjoon/assets/50236187/0b14d763-dd6a-4f3b-ba91-f5abd2d2be5d)
![집추천4](https://github.com/namoo1818/Baekjoon/assets/50236187/4b29f751-5fbb-41e0-b3c4-182433cf3a7a)

### 🧓 집 신청 및 집 상세 정보
- 집 옵션 및 호스트 정보 조회

![리드미1](https://github.com/NoRuTnT/Dotori/assets/114069644/22260ef8-9381-4dba-abb7-c6f502eea37d)
![리드미2](https://github.com/NoRuTnT/Dotori/assets/114069644/d01f48bd-27f7-4b08-b413-533c67e16c0a)

### 🧓 계약 진행
- 집 계약 신청

![리드미3](https://github.com/NoRuTnT/Dotori/assets/114069644/154abe0f-14cc-4945-8534-54fb31b030e4)
![리드미4](https://github.com/NoRuTnT/Dotori/assets/114069644/0ea3b694-c631-46b4-93ff-ea2ec539fb39)

- 계약서 확인

![리드미5](https://github.com/NoRuTnT/Dotori/assets/114069644/25ad16ee-353d-4d86-8a63-2e766bd80cf4)
![리드미6](https://github.com/NoRuTnT/Dotori/assets/114069644/47da2806-5def-48c1-9a31-3fc651b8da70)

![리드미7](https://github.com/NoRuTnT/Dotori/assets/114069644/5c679a92-7a62-4cd8-8085-dace39dbbe58)

- 계약서 서명 및 생성

![리드미8](https://github.com/NoRuTnT/Dotori/assets/114069644/1914e68c-d39e-41a3-9154-063fae1be639)
![리드미9](https://github.com/NoRuTnT/Dotori/assets/114069644/54f63759-f7c7-4ec6-b3cc-7087452d4861)

- 계약 완료 및 계약서 파일 생성

![리드미10](https://github.com/NoRuTnT/Dotori/assets/114069644/95f26105-d9b4-4eb3-8145-aa4facc8f556)
![리드미11](https://github.com/NoRuTnT/Dotori/assets/114069644/0db8f6b7-3c9d-42e5-8911-4736bff73b42)

- 계약서 다운로드

![리드미12](https://github.com/NoRuTnT/Dotori/assets/114069644/458390af-3030-449b-8d5e-b3fd73c88f85)
![리드미13](https://github.com/NoRuTnT/Dotori/assets/114069644/565262ed-b9fe-4bfb-8ef9-6317558fa391)

### 🧓 활동 인증 및 보호자 알림
- 활동 내역 인증

![활동 내역 인증1](https://github.com/namoo1818/Baekjoon/assets/50236187/bfa1fac2-03b2-4a44-a157-633e4e38022e)
![활동 내역 인증2](https://github.com/namoo1818/Baekjoon/assets/50236187/bf5651a4-8f05-4e4c-9773-96cc9029ec34)


- 리뷰

![리뷰1](https://github.com/namoo1818/Baekjoon/assets/50236187/4709ba64-7c8a-4fb7-bca8-c78993c04825)
![리뷰2](https://github.com/namoo1818/Baekjoon/assets/50236187/016025de-0b4b-4843-aec1-cdaa029da595)

# 🏠 기술 스택

### 💡 사용 기술

### 💡 Version

| Teck stack |                       | version |
| ---------- |-----------------------| ------- |
| Frontend   | React                 | 18.2.0  |
|            | Typescript            | 4.4.2   |
|            | zustand               | 4.5.2   |
|            | webpack               | 5.6.0   |
| Data       | FastAPI               | 0.95.0  |
|            | uvicorn               | 0.21.1  |
| Backend    | SpringBoot            | 2.7.17  |
|            | Java (Amazon Coretto) | 11.0.22 |
| Database   | MySQL                 | 8.0.32  |
|            | MongoDB               | 5.0.25  |
|            | Redis                 |         |
| Infra      | Docker                |         |
|            | Docker Hub            |         |
|            | Nginx                 |         |
|            | AWS EC2               |         |
|            | Prometheus            |         |
|            | Grafana               |         |

# 🏠 데이터 분석

### 💡 데이터 수집, 전처리

- 데이터 크롤링 : 부동산 사이트 매물 데이터 수집
- 추천에 불필요한 정보 제거 : ex) 공인중개사 주소정보
- 결측치 제거 : ex) 시군구 주소정보 -> 더미 문자열로
[결측치가 제거(empty로 padding)된 데이터셋]
![image-1](https://github.com/namoo1818/Baekjoon/assets/50236187/139242df-0454-4d64-ab16-0c7d085b4e43)
- 획득 정보들의 자료형 정리 : ex) lat: float, address: str

총 1264개 데이터 수집

### 💡 추천 알고리즘

- 부동산은 계약 주기가 길기 때문에 (6개월 이상) 협업 필터링을 사용하기에 부적합 ⇒ 컨텐츠 기반 추천 알고리즘 고도화 추진

- 코사인 유사도 : 두 벡터간 각도 코사인값을 이용하여 측정된 벡터간의 유사한 정도
[출처:https://wikidocs.net/24603]
![image](https://github.com/namoo1818/Baekjoon/assets/50236187/8050bbe0-5366-4358-b124-eff69bda5419)
1. host선호 정보와 member선호 정보의 종류로부터 특성을 정리하고 각각 벡터화
```python
def get_member_vector(member_personality):
    ...
    day = convert_bool_to_int(member_personality['daytime'])+convert_bool_to_int(member_personality['fast'])*weight
    ...
    member_vector = [day, night, smoke, extro, intro,
                     host_related, pet_lover, cold, hot]
    return np.array(member_vector)
```
2. 각각의 host벡터에 대해 member벡터와 코사인 유사도 계산
```python
from sklearn.metrics.pairwise import cosine_similarity
# 코사인 유사도 계산
similarity = cosine_similarity(host_vector.reshape(1,-1), member_vector.reshape(1,-1))
priorities.append([similarity[0][0], item['home_no']]) # 유사도와 인덱스 번호를 배열에 추가
```
3. 우선순위가 높은 순서대로 MongoDB에 다시 find() 수행
```python
    for lim, index in enumerate(priorities):
        if(lim >= SEARCH_LIMIT):
            break
        item = db.home.find({'home_no': index[1]}, {mongo_projection_query})
```
4. 획득한 결과를 client에 반환

### 💡 추천 서버구현

- FastAPI 웹서버 구현
- MongoDB 접근을 위한 pymongo lib 사용
- Frontend filter 조건 + 컨텐츠 추천 알고리즘 기반 추천 집 리스트 반환

### 💡 알고리즘 실행 성능 향상

- 최대 검색되는 요소의 개수를 200개 이내로 제한해서 json_data 용량 최소화
```python
SEARCH_LIMIT = 200
...
    for lim, index in enumerate(priorities):
        if(lim >= SEARCH_LIMIT):
            break
        (data_process_logic)
```
- 프론트엔드 코드처리에 필수적인 key-value 성분만 선별해서 추출 (MongoDB Projection 기능)
```python
item = db.home.find({'home_no': index[1]}, {'type': 1,
                             'smoke': 1,
                             'pet': 1,
                             'clean': 1,
                             ...
                             })
```
- 최적화 이전<br/>
![최적화이전](https://github.com/namoo1818/Baekjoon/assets/50236187/2ffea411-3b3c-4303-832e-41fa7e5e6d44)
- 최적화 이후<br/>
![최적화이후](https://github.com/namoo1818/Baekjoon/assets/50236187/e4602de6-3d45-47a7-8f9a-7e961fe3903a)
### 💡 AWS S3 활용 파일 처리
- presined url 방식

![s3image](https://github.com/namoo1818/Baekjoon/assets/50236187/fb9e0ce1-2395-498d-9c5d-f1eccace38ab)

  - s3에 직접 파일을 업로드/다운로드 하기 위해서는 해당 s3에 대한 접근 권한을 인증해야 합니다.
  - 빅데이터를 다루는 만큼, 대량의 파일처리를 위해서 백엔드 서버에 multipart 형식의 파일을 보내 서버가 직접 업로드/다운로드 하는 방식은 장기적으로 생각했을 때 서버에 부하를 줄 수 있을 것이라 생각해 프로젝트에서 presined url 방식을 사용하게 되었습니다. 

- 문서화

![tfeo-s3](https://github.com/namoo1818/Baekjoon/assets/50236187/c30086b8-8bb2-4691-b613-e107f458494c)

---
